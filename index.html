<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Poker Sync Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0f172a; -webkit-tap-highlight-color: transparent; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(10px); border-top: 1px solid rgba(255, 255, 255, 0.05); }
        .loader { border: 2px solid #f3f3f3; border-top: 2px solid #f59e0b; border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        [v-cloak] { display: none !important; }
    </style>
</head>
<body class="text-gray-100 min-h-screen pb-24">

<div id="app" v-cloak class="relative min-h-screen flex flex-col">
    <component :is="currentViewComponent" 
        :user="state.user" 
        :loading="state.loading" 
        :error="state.error"
        :stats="state.stats"
        :game="state.game"
        :history="state.history"
        @auth="handleAuth"
        @guest="guestLogin"
        @logout="logout"
        @create="handleCreate" 
        @join="handleJoin"
        @add-player="addPlayer"
        @save-player="savePlayer"
        @remove-player="removePlayer"
        @add-buy="addBuy"
        @bind="bindSeat"
        @settle="settle"
        @go-lobby="setView('LobbyView')"
        @copy-id="copyId"
    ></component>

    <nav v-if="state.user" class="fixed bottom-0 left-0 right-0 z-50 glass pb-safe-bottom">
        <div class="flex justify-around items-center h-16 max-w-md mx-auto">
            <button @click="setView('LobbyView')" :class="state.view === 'LobbyView' ? 'text-amber-500' : 'text-gray-500'" class="flex flex-col items-center gap-1 w-full h-full justify-center">
                <i class="fas fa-home text-xl"></i><span class="text-[10px]">大廳</span>
            </button>
            <button @click="setView('GameView')" :class="state.view === 'GameView' ? 'text-amber-500' : 'text-gray-500'" class="flex flex-col items-center gap-1 w-full h-full justify-center relative">
                <i class="fas fa-gamepad text-xl"></i><span class="text-[10px]">牌局</span>
                <span v-if="state.game" class="absolute top-2 right-8 w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
            </button>
            <button @click="setView('ReportView')" :class="state.view === 'ReportView' ? 'text-amber-500' : 'text-gray-500'" class="flex flex-col items-center gap-1 w-full h-full justify-center">
                <i class="fas fa-chart-line text-xl"></i><span class="text-[10px]">報表</span>
            </button>
            <button @click="setView('ProfileView')" :class="state.view === 'ProfileView' ? 'text-amber-500' : 'text-gray-500'" class="flex flex-col items-center gap-1 w-full h-full justify-center">
                <i class="fas fa-user text-xl"></i><span class="text-[10px]">我的</span>
            </button>
        </div>
    </nav>
</div>

<script type="module" src="./main.js?v=3"></script>
</body>
</html>
